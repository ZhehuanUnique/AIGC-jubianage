# 视频文件上传到 COS 说明

## 🔍 问题诊断

如果上传失败，请按以下步骤检查：

### 1. 检查环境

运行 `检查上传环境.bat` 检查：
- ✅ Python 是否安装
- ✅ cos-python-sdk-v5 是否安装
- ✅ 视频文件是否存在

### 2. 测试 COS 连接

运行 `测试COS连接.bat` 或 `python 测试COS连接.py` 来测试：
- COS 客户端连接
- 存储桶访问权限
- 文件上传功能

### 3. 常见问题

#### 问题 1: Python 未找到

**错误**: `python: command not found` 或 `'python' 不是内部或外部命令`

**解决**:
1. 确认已安装 Python 3.11+
2. 将 Python 添加到系统 PATH
3. 或使用完整路径: `C:\Users\Administrator\AppData\Local\Programs\Python\Python314\python.exe`

#### 问题 2: COS SDK 未安装

**错误**: `ModuleNotFoundError: No module named 'qcloud_cos'`

**解决**:
```bash
pip install cos-python-sdk-v5
```

#### 问题 3: 权限错误

**错误**: `403 Forbidden` 或 `Access Denied`

**解决**:
1. 检查 COS_SECRET_ID 和 COS_SECRET_KEY 是否正确
2. 检查存储桶权限配置
3. 确认存储桶名称正确: `jubianage-1392491103`

#### 问题 4: 网络错误

**错误**: `Connection timeout` 或 `Network unreachable`

**解决**:
1. 检查网络连接
2. 检查防火墙设置
3. 尝试使用代理（如果需要）

#### 问题 5: 文件太大

**错误**: 上传超时或内存不足

**解决**:
- 脚本已支持分块上传（大于100MB自动使用）
- 如果仍然失败，可以手动压缩视频文件

### 4. 手动上传

如果脚本无法使用，可以：

1. **使用腾讯云控制台上传**
   - 登录腾讯云控制台
   - 进入 COS 服务
   - 选择存储桶 `jubianage-1392491103`
   - 创建 `videos/` 文件夹
   - 上传 `index.mp4` 和 `index.webm`

2. **使用 COS 客户端工具**
   - 下载腾讯云 COS 客户端
   - 配置密钥
   - 拖拽上传文件

### 5. 更新 HTML 中的视频 URL

上传成功后，需要手动更新 `frontend-nuxt/public/index.html`：

将：
```html
<source src="/index.mp4" type="video/mp4" />
```

改为：
```html
<source src="https://jubianage-1392491103.cos.ap-guangzhou.myqcloud.com/videos/index.mp4" type="video/mp4" />
```

---

## 📝 上传后的文件 URL

上传成功后，视频文件的 URL 格式为：

```
https://jubianage-1392491103.cos.ap-guangzhou.myqcloud.com/videos/index.mp4
https://jubianage-1392491103.cos.ap-guangzhou.myqcloud.com/videos/index.webm
```

---

## ✅ 检查清单

上传前：
- [ ] Python 已安装
- [ ] cos-python-sdk-v5 已安装
- [ ] 视频文件存在
- [ ] COS 配置正确

上传后：
- [ ] 在 COS 控制台确认文件已上传
- [ ] 测试视频 URL 可以访问
- [ ] 更新 index.html 中的视频 URL
- [ ] 删除本地视频文件（可选）

---

**最后更新**: 2025-12-28

